<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–∏–¥ –ø–æ –î–ù–†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
<button id="recommend-btn" class="recommend-btn">üî• –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>

<!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
<div id="recommend-popup" class="favorites-popup hidden">
  <div class="popup-header">
    <h3>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
    <button id="close-recommend" class="close-btn">√ó</button>
  </div>
  <div id="recommend-list" class="favorites-list"></div>
</div>



  <div id="map"></div>

  <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ª–æ–∫–∞—Ü–∏–∏ -->
  <div id="location-card" class="location-card hidden">
    <button id="close-card" class="close-btn">√ó</button>
    <img id="card-photo" src="" alt="–§–æ—Ç–æ" class="card-photo">
    <div class="card-content">
      <h2 id="card-title"></h2>
      <div id="card-rating" class="card-rating"></div>
      <p id="card-desc"></p>
      <p id="card-address" class="small"></p>
      <a id="card-link" href="#" class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
      <button id="fav-add-btn" class="btn" style="margin-top:10px;">‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ -->
  <div id="add-location-panel" class="add-location-panel hidden">
    <h3>–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</h3>
    <form id="add-location-form">
      <label>–ù–∞–∑–≤–∞–Ω–∏–µ:<br><input type="text" name="name" required></label><br>
      <label>–û–ø–∏—Å–∞–Ω–∏–µ:<br><textarea name="description"></textarea></label><br>
      <label>–ê–¥—Ä–µ—Å:<br><input type="text" name="address"></label><br>
      <label>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞):<br>
        <input type="text" name="lat" readonly> ,
        <input type="text" name="lng" readonly>
      </label><br>
      <label>–§–æ—Ç–æ (URL):<br><input type="text" name="photo"></label><br>
      <label>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:<br><input type="text" name="opening_hours"></label><br>
      <label>–ö–æ–Ω—Ç–∞–∫—Ç—ã:<br><input type="text" name="contacts"></label><br>
      <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:<br>
        <select name="category">
          {% for cat in categories %}
            <option value="{{ cat.id }}">{{ cat.name }}</option>
          {% endfor %}
        </select>
      </label><br><br>
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button type="button" id="cancel-add">–û—Ç–º–µ–Ω–∞</button>
    </form>
  </div>

  <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
  <div id="favorites-popup" class="favorites-popup hidden">
    <div class="popup-header">
      <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
      <button id="close-fav" class="close-btn">√ó</button>
    </div>
    <div id="favorites-list" class="favorites-list">
      <p class="empty-msg">–ü–æ–∫–∞ –ø—É—Å—Ç–æ ‚ù§Ô∏è</p>
    </div>
  </div>

  <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö -->
  <div id="auth-popup" class="auth-popup hidden">
    <div class="auth-popup-content">
      <p>–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –Ω—É–∂–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è.</p>
      <a href="{{ url_for('login') }}" class="btn">–í–æ–π—Ç–∏</a>
      <button id="close-auth" class="btn gray">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <div class="mobile-bottom-bar">
    <button class="bottom-btn" id="fav-btn">‚≠ê</button>
    <div class="search-box">
        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...">
        <button id="search-btn">üîç</button>
     </div>
    <button class="bottom-btn" id="profile-btn">üë§</button>
  </div>
  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    <div id="search-results" class="search-results hidden"></div>

  <script>
    let map;
    let allLocations = [];
    let placemarks = {};
    let clusterer; 

    ymaps.ready(init);

    function init() {
        map = new ymaps.Map("map", {
        center: [48.0, 37.8],
        zoom: 12,
        controls: ["zoomControl", "fullscreenControl"]
         });
        
        // === –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ç–æ—Ä–∞ ===
        clusterer = new ymaps.Clusterer({
            preset: 'islands#orangeClusterIcons',
            groupByCoordinates: false,
            clusterDisableClickZoom: false,
            clusterOpenBalloonOnClick: true,
        });

        // === –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞—Ü–∏–π ===
        fetch('/api/locations')
            .then(res => res.json())
            .then(data => {
                allLocations = data;

                data.forEach(loc => {
                    const placemark = new ymaps.Placemark(
                        [loc.lat, loc.lng],
                        { hintContent: loc.name },
                        { preset: "islands#orangeIcon" }
                    );

                    placemark.events.add('click', () => showCard(loc));
                    placemarks[loc.id] = placemark;

                    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–ª–∞—Å—Ç–µ—Ä
                    clusterer.add(placemark);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ –∫–∞—Ä—Ç—É
                map.geoObjects.add(clusterer);
            });

        // === –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏ –∞–¥–º–∏–Ω–æ–º ===
        {% if current_user.is_authenticated and current_user.role in ['admin','moderator','owner'] %}

        map.events.add('click', e => {
            const coords = e.get('coords');
            const panel = document.getElementById('add-location-panel');
            panel.classList.remove('hidden');
            panel.querySelector('input[name=lat]').value = coords[0];
            panel.querySelector('input[name=lng]').value = coords[1];
        });

        document.getElementById('cancel-add').addEventListener('click', () => {
            document.getElementById('add-location-panel').classList.add('hidden');
        });

       document.getElementById('add-location-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {};
            new FormData(this).forEach((v, k) => data[k] = v);

            {% if current_user.role == 'owner' %}
            const url = '/api/my_location/add';
            {% else %}
            const url = '/api/add_location';
            {% endif %}

            fetch(url, {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(d => {
                if (d.status === 'ok') {
                    document.getElementById('add-location-panel').classList.add('hidden');
                    alert('‚úÖ –õ–æ–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                    location.reload();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + d.msg);
                }
            });
        });

        {% endif %}
    }

    // === –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ –ª–æ–∫–∞—Ü–∏–∏ ===
    function showCard(loc) {
        const card = document.getElementById('location-card');
        document.getElementById('card-title').innerText = loc.name;
        document.getElementById('card-desc').innerText = loc.description || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç';
        document.getElementById('card-address').innerText = loc.address || '';
        document.getElementById('card-link').href = `/location/${loc.id}`;
        document.getElementById('card-photo').src = loc.photo || '/static/no_photo.png';
        // === –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ ===
        const ratingDiv = document.getElementById('card-rating');
        const avg = loc.avg_rating || 0;
        const stars = Math.round(avg);
        let html = `<span class="avg-rating">${avg.toFixed(1)}</span>`;
        for (let i = 1; i <= 5; i++) {
            html += `<span class="star ${i <= stars ? 'gold' : ''}">‚òÖ</span>`;
        }
        html += `<span style="font-size:14px; color:#777;"> (${loc.reviews_count} –æ—Ç–∑—ã–≤–æ–≤)</span>`;
        ratingDiv.innerHTML = html;
        document.getElementById('card-link').href = `/location/${loc.id}/reviews`;
     document.getElementById('card-link').innerText = "üìñ –ü—Ä–æ—á–∏—Ç–∞—Ç—å –æ—Ç–∑—ã–≤—ã";

        const favBtn = document.getElementById('fav-add-btn');


        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º
        fetch('/api/favorites')
            .then(res => res.json())
            .then(data => {
                const isFav = data.some(f => f.id === loc.id);
                updateFavButton(isFav, loc);
            });

        card.classList.remove('hidden');
    }
    function updateFavButton(isFav, loc) {
        const favBtn = document.getElementById('fav-add-btn');
        if (isFav) {
            favBtn.innerText = '‚ùå –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ';
            favBtn.onclick = () => removeFavorite(loc);
        } else {
            favBtn.innerText = '‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ';
            favBtn.onclick = () => addFavorite(loc);
        }
    }
    function addFavorite(loc) {
        fetch(`/favorite/${loc.id}`, { method: 'POST' })
            .then(r => {
                if (r.status === 401) {
                    document.getElementById('auth-popup').classList.remove('hidden');
                    return null;
                }
                return r.json();
            })
            .then(d => {
                if (d && d.status === 'ok') {
                    alert("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ");
                    loadFavorites();
                    updateFavButton(true, loc);
                }
            })
            .catch(err => console.error(err));
    }
    function removeFavorite(loc) {
        fetch(`/favorite/${loc.id}`, { method: 'DELETE' })
            .then(r => {
                if (r.status === 401) {
                    document.getElementById('auth-popup').classList.remove('hidden');
                    return null;
                }
                return r.json();
            })
            .then(d => {
                if (d && d.status === 'ok') {
                    alert("–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ");
                    loadFavorites();
                    updateFavButton(false, loc);
                }
            })
            .catch(err => console.error(err));
    }
    document.getElementById('close-card').addEventListener('click', () => {
      document.getElementById('location-card').classList.add('hidden');
    });

    // === –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ ===
    function toggleFavorite(loc) {
        fetch(`/favorite/${loc.id}`, { method: 'POST' })
            .then(r => {
                if (r.status === 401) {  // –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    document.getElementById('auth-popup').classList.remove('hidden');
                    return null;
                }
                if (r.status === 400) {
                    // –£–∂–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º ‚Äî —É–¥–∞–ª—è–µ–º
                    return fetch(`/favorite/${loc.id}`, { method: 'DELETE' })
                        .then(res => res.json())
                        .then(d => {
                            if (d.status === 'ok') {
                                alert("–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ");
                                loadFavorites();
                            }
                        });
                }
                return r.json();
            })
            .then(d => {
                if (d && d.status === 'ok' && d.action === 'added') {
                    alert("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ");
                    loadFavorites();
                }
            })
            .catch(err => {
                console.error(err);
                document.getElementById('auth-popup').classList.remove('hidden');
            });
    }


    // === –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ ===
    // === –û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ ===
    document.getElementById('fav-btn').addEventListener('click', () => {
    fetch('/api/favorites')
        .then(r => {
        if (r.status === 401) { // –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            document.getElementById('auth-popup').classList.remove('hidden'); // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
            return null;
        }
        return r.json();
        })
        .then(data => {
        if (!data) return;

        const list = document.getElementById('favorites-list');
        list.innerHTML = '';

        if (data.length === 0) {
            list.innerHTML = '<p class="empty-msg">–ü–æ–∫–∞ –ø—É—Å—Ç–æ ‚ù§Ô∏è</p>';
        } else {
            data.forEach(fav => {
            const item = document.createElement('div');
            item.className = 'favorite-item';
            item.innerHTML = `
                <span>${fav.name}</span>
                <button data-lat="${fav.lat}" data-lng="${fav.lng}">üìç</button>
            `;
            item.querySelector('button').addEventListener('click', e => {
                const lat = parseFloat(e.target.dataset.lat);
                const lng = parseFloat(e.target.dataset.lng);
                map.setCenter([lat, lng], 15);
                showCard(fav);
                document.getElementById('favorites-popup').classList.add('hidden');
            });
            list.appendChild(item);
            });
        }

        document.getElementById('favorites-popup').classList.remove('hidden');
        })
        .catch(err => {
        console.error(err);
        // –Ω–∞ —Å–ª—É—á–∞–π –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫
        document.getElementById('auth-popup').classList.remove('hidden');
        });
    });


    // === –ü–æ–∏—Å–∫ ===
    const searchInput = document.getElementById('search-input');
    const searchBtn = document.getElementById('search-btn');

    searchBtn.addEventListener('click', doSearch);
    searchInput.addEventListener('keypress', e => {
    if (e.key === 'Enter') doSearch();
    });
    
    function doSearch() {
        const query = searchInput.value.trim().toLowerCase();
        const resultsBox = document.getElementById('search-results');

        resultsBox.innerHTML = '';
        resultsBox.classList.add('hidden');
        if (!query) return;

        const results = allLocations.filter(l =>
            l.name.toLowerCase().includes(query) ||
            (l.category && l.category.toLowerCase().includes(query))
        );

        if (results.length === 0) {
            resultsBox.innerHTML = '<p style="padding:10px; text-align:center; color:#777;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî</p>';
            resultsBox.classList.remove('hidden');
            return;
        }

        // –µ—Å–ª–∏ –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
        if (results.length === 1) {
            const loc = results[0];
            map.setCenter([loc.lat, loc.lng], 15);
            showCard(loc);
            return;
        }

        // –∏–Ω–∞—á–µ ‚Äî –≤—ã–≤–æ–¥–∏–º —Å–ø–∏—Å–æ–∫
        results.forEach(loc => {
            const item = document.createElement('div');
            item.className = 'search-result-item';
            item.innerHTML = `
            <div class="info">
                <h4>${loc.name}</h4>
                <p>${loc.category || '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏'}</p>
            </div>
            <button class="btn small" data-id="${loc.id}">üìç</button>
            `;

            // –∫–ª–∏–∫ –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ª–æ–∫–∞—Ü–∏–∏
            item.addEventListener('click', () => {
            map.setCenter([loc.lat, loc.lng], 15);
            showCard(loc);
            resultsBox.classList.add('hidden');
            });

            // –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ üìç –ø—Ä–æ—Å—Ç–æ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É
            item.querySelector('button').addEventListener('click', (e) => {
            e.stopPropagation();
            map.setCenter([loc.lat, loc.lng], 15);
            resultsBox.classList.add('hidden');
            showCard(loc);
            });

            resultsBox.appendChild(item);
        });

        resultsBox.classList.remove('hidden');
    }
    // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –∏–∑–≤–Ω–µ
    document.addEventListener('click', e => {
        const box = document.getElementById('search-results');
        const searchBox = document.querySelector('.search-box');
        if (!searchBox.contains(e.target)) {
            box.classList.add('hidden');
        }
    });


    // === –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è ===
    // === –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è ===
    document.getElementById('profile-btn').addEventListener('click', () => {
        {% if current_user.is_authenticated %}
            {% if current_user.role in ['admin','moderator'] %}
            window.location.href = "{{ url_for('admin_panel') }}";
            {% elif current_user.role == 'owner' %}
            window.location.href = "{{ url_for('my_locations') }}";
            {% else %}
            window.location.href = "{{ url_for('profile') }}";
            {% endif %}
        {% else %}
            window.location.href = "{{ url_for('login') }}";
        {% endif %}
    });


    // === –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω ===
    document.getElementById('close-fav').addEventListener('click', () => {
      document.getElementById('favorites-popup').classList.add('hidden');
    });
    document.getElementById('close-auth').addEventListener('click', () => {
      document.getElementById('auth-popup').classList.add('hidden');
    });

    function loadFavorites() {
      // –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
      fetch('/api/favorites').catch(()=>{});
    }


// === –ö–Ω–æ–ø–∫–∞ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ===
const recommendBtn = document.getElementById('recommend-btn');
const recommendPopup = document.getElementById('recommend-popup');
const recommendList = document.getElementById('recommend-list');
const closeRecommend = document.getElementById('close-recommend');

recommendBtn.addEventListener('click', () => {
    recommendList.innerHTML = '';
    // —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤
    const recs = allLocations.slice().sort((a,b) => (b.reviews_count||0) - (a.reviews_count||0));
    // –±–µ—Ä—ë–º —Ç–æ–ø 5
    recs.slice(0,5).forEach(loc => {
        const item = document.createElement('div');
        item.className = 'favorite-item'; // –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∏–ª—å
        item.innerHTML = `<span>${loc.name} (${loc.reviews_count||0} –æ—Ç–∑—ã–≤–æ–≤)</span> <button data-lat="${loc.lat}" data-lng="${loc.lng}">üìç</button>`;
        
        // –∫–ª–∏–∫ –ø–æ –≤—Å–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
        item.addEventListener('click', () => {
            map.setCenter([loc.lat, loc.lng], 15);
            showCard(loc);
            recommendPopup.classList.add('hidden');
        });

        // –∫–Ω–æ–ø–∫–∞ üìç —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É
        item.querySelector('button').addEventListener('click', e => {
            e.stopPropagation();
            const lat = parseFloat(e.target.dataset.lat);
            const lng = parseFloat(e.target.dataset.lng);
            map.setCenter([lat, lng], 15);
            showCard(loc);
            recommendPopup.classList.add('hidden');
        });

        recommendList.appendChild(item);
    });

    recommendPopup.classList.remove('hidden');
});

closeRecommend.addEventListener('click', () => {
    recommendPopup.classList.add('hidden');
});


  </script>
</body>
</html>
